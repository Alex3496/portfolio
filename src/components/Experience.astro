---
import { Briefcase, Calendar } from '@lucide/astro';

const experiences = [
	{
		id: 1,
		position: "Full Stack Developer",
		company: "I See You Technologies",
		period: "July 2020 – Present",
		location: "Mexico City/Tijuana",
		description: [
			"Development and maintenance of web and mobile applications with React, Node.js, Express, React Native and MongoDB",
			"Building ERP systems, inventories, stamping (Syncfy API), and e-commerce platforms (Square, Shopify)",
			"Active participation in the complete software development lifecycle",
			"Technical support and requirements gathering with clients",
			"Optimization of existing modules to improve user experience",
			"Team collaboration for delivering scalable solutions"
		],
		technologies: ["React", "Node.js", "Express", "React Native", "MongoDB", "Syncfy API", "Square", "Shopify"]
	},
		
];
---

<section id="experience" class="experience-section">
	<div class="experience-container">
		<div class="section-header">
			<h2>Work Experience</h2>
			<div class="divider"></div>
			<p class="description">
				My professional journey and the companies I've had the privilege to work with.
			</p>
		</div>

		<div class={`timeline-wrapper ${experiences.length === 1 ? 'single-experience' : ''}`}>
			<!-- Vertical Line -->
			<div class="timeline-line"></div>

			<div class="timeline">
				{experiences.map((exp, index) => (
					<div class={`timeline-item ${index % 2 === 0 ? 'reverse' : ''} ${experiences.length === 1 ? 'single' : ''}`}>
						<!-- Timeline Dot -->
						<div class="timeline-dot"></div>

						<!-- Content -->
						<div class="timeline-content">
							<div class="experience-card">
								<div class="card-header">
									<h3 class="position">
										{index % 2 !== 0 && <Briefcase size={18} class="icon-desktop" />}
										{exp.position}
										{index % 2 === 0 && <Briefcase size={18} class="icon-desktop" />}
										<Briefcase size={18} class="icon-mobile" />
									</h3>
									<h4 class="company">{exp.company}</h4>
									<div class="period">
										<Calendar size={14} />
										<span>{exp.period}</span>
									</div>
								</div>

								<ul class="description-list">
									{exp.description.map((desc) => (
										<li>{desc}</li>
									))}
								</ul>

								<div class="technologies">
									{exp.technologies.map((tech) => (
										<span class="tech-badge">{tech}</span>
									))}
								</div>
							</div>
						</div>
						
						<!-- Empty space for the other side -->
						<div class="timeline-spacer"></div>
					</div>
				))}
			</div>
		</div>
	</div>
</section>

<style>
	.experience-section {
		padding: 5rem 0;
	}

	.experience-container {
		max-width: 1000px;
		margin: 0 auto;
		padding: 0 1.5rem;
	}

	.section-header {
		text-align: center;
		margin-bottom: 4rem;
	}

	.section-header h2 {
		font-size: var(--text-3xl);
		font-weight: 700;
		color: var(--gray-0);
		margin-bottom: 1rem;
	}

	.divider {
		width: 5rem;
		height: 4px;
		background: var(--accent-regular);
		margin: 0 auto 1rem;
		border-radius: 9999px;
	}

	.description {
		margin-top: 1rem;
		font-size: var(--text-lg);
		color: var(--gray-300);
		max-width: 42rem;
		margin-left: auto;
		margin-right: auto;
		line-height: 1.6;
	}

	.timeline-wrapper {
		position: relative;
	}

	.timeline-line {
		position: absolute;
		left: 0;
		top: 0;
		bottom: 0;
		width: 2px;
		background: var(--gray-800);
	}

	.timeline {
		display: flex;
		flex-direction: column;
		gap: 3rem;
	}

	.timeline-item {
		position: relative;
		display: flex;
		flex-direction: column;
		gap: 2rem;
		margin-left: 1.5rem;
	}

	.timeline-dot {
		position: absolute;
		left: -1.7rem;
		top: 0;
		width: 14px;
		height: 14px;
		background: var(--accent-regular);
		border-radius: 50%;
		border: 4px solid var(--gray-999);
		box-shadow: var(--shadow-md);
		z-index: 10;
	}

	.timeline-content {
		flex: 1;
	}

	.experience-card {
		background: var(--gray-999_40);
		padding: 1.5rem;
		border-radius: 0.75rem;
		box-shadow: var(--shadow-md);
		border: 1px solid var(--gray-800);
		transition: all 0.3s ease;
	}

	.experience-card:hover {
		box-shadow: var(--shadow-lg);
		transform: translateY(-2px);
	}

	.card-header {
		margin-bottom: 1rem;
	}

	.position {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: var(--text-xl);
		font-weight: 700;
		color: var(--gray-0);
		margin-bottom: 0.5rem;
	}

	.icon-desktop {
		display: none;
		color: var(--accent-regular);
	}

	.icon-mobile {
		display: inline;
		color: var(--accent-regular);
	}

	.company {
		font-size: var(--text-lg);
		font-weight: 600;
		color: var(--accent-regular);
		margin-bottom: 0.5rem;
	}

	.period {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		color: var(--gray-400);
		font-size: 16px;
	}

	.description-list {
		list-style: none;
		padding: 0;
		margin-bottom: 1rem;
	}

	.description-list li {
		color: var(--gray-100);
		font-size: var(--text-md);
		line-height: 1.6;
		margin-bottom: 0.5rem;
	}

	.description-list li::before {
		content: '• ';
		color: var(--accent-regular);
		font-weight: bold;
		margin-right: 0.5rem;
	}

	.technologies {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
	}

	.tech-badge {
		padding: 0.25rem 0.5rem;
		background: var(--gray-900);
		color: var(--gray-300);
		font-size: var(--text-sm);
		border-radius: 0.25rem;
		font-weight: 500;
	}

	.timeline-spacer {
		display: none;
	}

	@media (min-width: 50em) {
		.section-header h2 {
			font-size: var(--text-4xl);
		}

		.timeline-line {
			left: 50%;
			transform: translateX(-50%);
		}

		.timeline-item {
			flex-direction: row;
			margin-left: 0;
		}

		.timeline-item.reverse {
			flex-direction: row-reverse;
		}

		.timeline-dot {
			left: 50%;
			transform: translateX(-50%);
		}

		.timeline-content,
		.timeline-spacer {
			flex: 1;
		}

		.timeline-spacer {
			display: block;
		}

		.icon-desktop {
			display: inline;
		}

		.icon-mobile {
			display: none;
		}

		.timeline-item:not(.reverse) .card-header {
			text-align: left;
		}

		.timeline-item.reverse .card-header {
			text-align: right;
		}

		.description-list {
			text-align: left;
		}

		.timeline-item:not(.reverse) .card-header .position {
			justify-content: flex-start;
		}

		.timeline-item.reverse .card-header .position {
			justify-content: flex-end;
		}

		.technologies {
			justify-content: flex-start;
		}

		/* Single experience styling */
		.timeline-wrapper.single-experience .timeline-line {
			display: none;
		}

		.timeline-wrapper.single-experience .timeline-dot {
			display: none;
		}

		.timeline-item.single {
			justify-content: center;
			margin-left: 0;
		}

		.timeline-item.single .timeline-content {
			flex: 0 0 80%;
			max-width: 80%;
		}

		.timeline-item.single .timeline-spacer {
			display: none;
		}

		.timeline-item.single .card-header {
			text-align: left;
		}

		.timeline-item.single .card-header .position {
			justify-content: flex-start;
		}
	}
</style>
